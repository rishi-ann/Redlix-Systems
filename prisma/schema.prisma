generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["driverAdapters"]
}

datasource db {
  provider = "postgresql"
}

model Developer {
  id        String          @id
  email     String          @unique
  createdAt DateTime        @default(now())
  reports   ProjectReport[]
  tasks     Task[]
  clients   Client[]        @relation("ClientToDeveloper")
}

model Client {
  id          String           @id
  name        String
  contactName String?
  email       String?
  mobile      String?
  startDate   DateTime?
  endDate     DateTime?
  totalBudget String?
  amountPaid  String?
  createdAt   DateTime         @default(now())
  documents   ClientDocument[]
  reports     ProjectReport[]
  tasks       Task[]
  developers  Developer[]      @relation("ClientToDeveloper")
}

model Task {
  id          String     @id @default(cuid())
  title       String
  description String?
  status      String     @default("PENDING")
  developerId String?
  clientId    String?
  createdAt   DateTime   @default(now())
  updatedAt   DateTime   @updatedAt
  client      Client?    @relation(fields: [clientId], references: [id])
  developer   Developer? @relation(fields: [developerId], references: [id])
}

model ProjectRequest {
  id           String   @id @default(cuid())
  clientName   String
  clientEmail  String
  projectTitle String
  description  String
  budget       String?
  status       String   @default("PENDING")
  createdAt    DateTime @default(now())
}

model ContactInquiry {
  id        String   @id @default(cuid())
  name      String
  email     String
  subject   String
  message   String
  status    String   @default("UNREAD")
  createdAt DateTime @default(now())
}

model ProjectReport {
  id               String    @id @default(cuid())
  clientId         String
  developerId      String
  status           String    @default("ON_TRACK")
  summary          String
  documentUrl      String?
  issueType        String?   @default("NONE")
  issueDescription String?
  createdAt        DateTime  @default(now())
  client           Client    @relation(fields: [clientId], references: [id], onDelete: Cascade)
  developer        Developer @relation(fields: [developerId], references: [id])
}

model ClientDocument {
  id          String   @id @default(cuid())
  clientId    String
  title       String
  url         String
  size        Int?
  type        String?
  content     Bytes?
  description String?
  createdAt   DateTime @default(now())
  client      Client   @relation(fields: [clientId], references: [id], onDelete: Cascade)
}
